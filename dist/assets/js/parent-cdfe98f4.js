import{b as C,u as I,e as v,S as P,_ as E}from"./index-71d91ebe.js";import{d as V,_ as x,k as p,G as B,n as h,j as D,Z as O,f as S,ah as U,o as u,c as b,V as s,P as l,X as _,O as d,Q as w,W as R,R as M,aE as j,u as G,aU as Q}from"./@vue-f9e59415.js";import{u as W,b as X}from"./vue-router-a024509b.js";import{s as y}from"./pinia-8895fa67.js";import"./vue-i18n-c4e0915d.js";import"./@intlify-ed9c9b63.js";import"./vue-b5d7f7af.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-f2d856bb.js";import"./nprogress-f4e438e8.js";import"./axios-9cbf0d09.js";import"./qs-36bd8b70.js";import"./side-channel-3a385e21.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-7ba7c20a.js";import"./element-plus-b9d096c5.js";import"./lodash-es-2e98bc53.js";import"./@vueuse-b50f0a95.js";import"./@sxzz-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-1b30f524.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-fc8420ed.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-7e89b549.js";import"./vue-demi-71ba0ef2.js";const Z={class:"layout-parent"},q=V({name:"layoutParentView"}),Be=V({...q,setup(z){const K=Q(()=>E(()=>import("./iframes-003eb601.js"),["assets/js/iframes-003eb601.js","assets/js/@vue-f9e59415.js","assets/js/vue-router-a024509b.js"])),i=W(),g=X(),A=C(),k=I(),{keepAliveNames:a,cachedViews:f}=y(A),{themeConfig:m}=y(k),e=x({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),n=p(()=>m.value.animation),L=p(()=>m.value.isTagsview?f.value:e.keepAliveNameList),c=p(()=>i.meta.isIframe),T=async()=>{g.getRoutes().forEach(t=>{t.meta.isIframe&&(t.meta.isIframeOpen=!1,t.meta.loading=!0,e.iframeList.push({...t}))})};return B(()=>{e.keepAliveNameList=a.value,v.on("onTagsViewRefreshRouterView",t=>{e.keepAliveNameList=a.value.filter(o=>i.name!==o),e.refreshRouterViewKey="",e.iframeRefreshKey="",h(()=>{e.refreshRouterViewKey=t,e.iframeRefreshKey=t,e.keepAliveNameList=a.value})})}),D(()=>{T(),h(()=>{setTimeout(()=>{if(m.value.isCacheTagsView){let t=P.get("tagsViewList")||[];f.value=t.filter(o=>{var r;return(r=o.meta)==null?void 0:r.isKeepAlive}).map(o=>o.name)}},0)})}),O(()=>{v.off("onTagsViewRefreshRouterView",()=>{})}),S(()=>i.fullPath,()=>{e.refreshRouterViewKey=decodeURI(i.fullPath)},{immediate:!0}),(t,o)=>{const r=U("router-view");return u(),b("div",Z,[s(r,null,{default:l(({Component:N})=>[s(_,{name:n.value,mode:"out-in"},{default:l(()=>[(u(),d(j,{include:L.value},[w((u(),d(M(N),{key:e.refreshRouterViewKey,class:"w100"})),[[R,!c.value]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),s(_,{name:n.value,mode:"out-in"},{default:l(()=>[w(s(G(K),{class:"w100",refreshKey:e.iframeRefreshKey,name:n.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[R,c.value]])]),_:1},8,["name"])])}}});export{Be as default};
