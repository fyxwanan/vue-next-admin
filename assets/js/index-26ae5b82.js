import{p as ee}from"./print-js-abef331a.js";import{t as te}from"./js-table2excel-9391413e.js";import{S as oe}from"./sortablejs-c9fcee54.js";import{s as ae}from"./pinia-8895fa67.js";import{u as le}from"./index-71d91ebe.js";import{a as ne}from"./element-plus-b9d096c5.js";import{d as $,e as ie,_ as re,k as x,ah as s,ap as se,o as c,c as b,Q as ce,O as u,P as p,V as l,S,F as v,a8 as V,K as pe,T,U as de,L as me,a as _,n as he,bm as ge,bk as ue}from"./@vue-f9e59415.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";import"./@intlify-ed9c9b63.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-a024509b.js";import"./vue-i18n-c4e0915d.js";import"./vue-b5d7f7af.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-f2d856bb.js";import"./nprogress-f4e438e8.js";import"./axios-9cbf0d09.js";import"./qs-36bd8b70.js";import"./side-channel-3a385e21.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-7ba7c20a.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-7e89b549.js";import"./lodash-es-2e98bc53.js";import"./@vueuse-b50f0a95.js";import"./@sxzz-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-1b30f524.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-fc8420ed.js";const be=i=>(ge("data-v-63cda63b"),i=i(),ue(),i),_e={class:"table-container"},ke={class:"table-footer mt15"},ye={class:"table-footer-tool"},Ce={class:"tool-box"},we=["data-key"],xe=be(()=>_("i",{class:"fa fa-arrows-alt handle cursor-pointer"},null,-1)),Se=$({name:"netxTable"}),ve=$({...Se,props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},printName:{type:String,default:()=>""}},emits:["delRow","pageChange","sortHeader"],setup(i,{expose:N,emit:I}){const n=i,g=I,z=ie(),L=le(),{themeConfig:E}=ae(L),a=re({page:{pageNum:1,pageSize:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),A=x(()=>!!n.config.isBorder),k=x(()=>n.config),R=x(()=>n.header.filter(t=>t.isCheck)),U=t=>{t?n.header.forEach(o=>o.isCheck=!0):n.header.forEach(o=>o.isCheck=!1),a.checkListIndeterminate=!1},B=()=>{const t=n.header.filter(o=>o.isCheck).length;a.checkListAll=t===n.header.length,a.checkListIndeterminate=t>0&&t<n.header.length},j=t=>{a.selectlist=t},D=t=>{g("delRow",t)},H=t=>{a.page.pageSize=t,g("pageChange",a.page)},P=t=>{a.page.pageNum=t,g("pageChange",a.page)},O=()=>{a.page.pageNum=1,a.page.pageSize=10,g("pageChange",a.page)},q=()=>{let t="",o="",r={};n.header.forEach(d=>{t+=`<th class="table-th">${d.title}</th>`}),n.data.forEach((d,h)=>{r[h]||(r[h]=[]),n.header.forEach(m=>{m.type==="text"?r[h].push(`<td class="table-th table-center">${d[m.key]}</td>`):m.type==="image"&&r[h].push(`<td class="table-th table-center"><img src="${d[m.key]}" style="width:${m.width}px;height:${m.height}px;"/></td>`)}),o+=`<tr>${r[h].join("")}</tr>`}),ee({printable:`<div style=display:flex;flex-direction:column;text-align:center><h3>${n.printName}</h3></div><table border=1 cellspacing=0><tr>${t}${o}</table>`,type:"raw-html",css:["//at.alicdn.com/t/c/font_2298093_rnp72ifj3ba.css","//unpkg.com/element-plus/dist/index.css"],style:"@media print{.mb15{margin-bottom:15px;}.el-button--small i.iconfont{font-size: 12px !important;margin-right: 5px;}}; .table-th{word-break: break-all;white-space: pre-wrap;}.table-center{text-align: center;}"})},F=()=>{if(a.selectlist.length<=0)return ne.warning("请先选择要导出的数据");te(n.header,a.selectlist,`${E.value.globalTitle} ${new Date().toLocaleString()}`)},J=()=>{g("pageChange",a.page)},K=()=>{he(()=>{const t=oe.create(z.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const o=[];t.toArray().forEach(r=>{n.header.forEach(d=>{d.key===r&&o.push({...d})})}),g("sortHeader",o)}})})};return N({pageReset:O}),(t,o)=>{const r=s("el-table-column"),d=s("el-image"),h=s("el-button"),m=s("el-popconfirm"),M=s("el-empty"),Q=s("el-table"),W=s("el-pagination"),f=s("SvgIcon"),G=s("el-tooltip"),y=s("el-checkbox"),X=s("el-scrollbar"),Y=s("el-popover"),Z=se("loading");return c(),b("div",_e,[ce((c(),u(Q,me({data:i.data,border:A.value},t.$attrs,{"row-key":"id",stripe:"",style:{width:"100%"},onSelectionChange:j}),{empty:p(()=>[l(M,{description:"暂无数据"})]),default:p(()=>[i.config.isSelection?(c(),u(r,{key:0,type:"selection","reserve-selection":!0,width:"30"})):S("",!0),i.config.isSerialNo?(c(),u(r,{key:1,type:"index",label:"序号",width:"60"})):S("",!0),(c(!0),b(v,null,V(R.value,(e,C)=>(c(),u(r,{key:C,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title},{default:p(w=>[e.type==="image"?(c(),u(d,{key:0,style:pe({width:`${e.width}px`,height:`${e.height}px`}),src:w.row[e.key],"zoom-rate":1.2,"preview-src-list":[w.row[e.key]],"preview-teleported":"",fit:"cover"},null,8,["style","src","preview-src-list"])):(c(),b(v,{key:1},[T(de(w.row[e.key]),1)],64))]),_:2},1032,["prop","width","label"]))),128)),i.config.isOperate?(c(),u(r,{key:2,label:"操作",width:"100"},{default:p(e=>[l(m,{title:"确定删除吗？",onConfirm:C=>D(e.row)},{reference:p(()=>[l(h,{text:"",type:"primary"},{default:p(()=>[T("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})):S("",!0)]),_:1},16,["data","border"])),[[Z,i.config.loading]]),_("div",ke,[l(W,{"current-page":a.page.pageNum,"onUpdate:currentPage":o[0]||(o[0]=e=>a.page.pageNum=e),"page-size":a.page.pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>a.page.pageSize=e),"pager-count":5,"page-sizes":[10,20,30],total:i.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:H,onCurrentChange:P},null,8,["current-page","page-size","total"]),_("div",ye,[l(f,{name:"iconfont icon-dayin",size:19,title:"打印",onClick:q}),l(f,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:F}),l(f,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:J}),l(Y,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:K},{reference:p(()=>[l(f,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})]),default:p(()=>[_("div",Ce,[l(G,{content:"拖动进行排序",placement:"top-start"},{default:p(()=>[l(f,{name:"fa fa-question-circle-o",size:17,class:"ml11",color:"#909399"})]),_:1}),l(y,{modelValue:a.checkListAll,"onUpdate:modelValue":o[2]||(o[2]=e=>a.checkListAll=e),indeterminate:a.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:U},null,8,["modelValue","indeterminate"]),l(y,{modelValue:k.value.isSerialNo,"onUpdate:modelValue":o[3]||(o[3]=e=>k.value.isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),l(y,{modelValue:k.value.isSelection,"onUpdate:modelValue":o[4]||(o[4]=e=>k.value.isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),l(X,null,{default:p(()=>[_("div",{ref_key:"toolSetRef",ref:z,class:"tool-sortable"},[(c(!0),b(v,null,V(i.header,e=>(c(),b("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[xe,l(y,{modelValue:e.isCheck,"onUpdate:modelValue":C=>e.isCheck=C,size:"default",class:"ml12 mr8",label:e.title,onChange:B},null,8,["modelValue","onUpdate:modelValue","label"])],8,we))),128))],512)]),_:1})]),_:1})])])])}}});const ut=fe(ve,[["__scopeId","data-v-63cda63b"]]);export{ut as default};
